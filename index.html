<!DOCTYPE html>
<!-- This is a very simple example of using Web WorldWind. -->
<html>
    <head lang="en">
        <meta charset="UTF-8">
        <title>ISS Tracker</title>
        <!-- Include the Web WorldWind library. -->
        <script src="https://files.worldwind.arc.nasa.gov/artifactory/web/0.9.0/worldwind.min.js"
                type="text/javascript">
        </script>
        <style>
            body {
                margin: 0;
                padding: 0;
                overflow: hidden;
            }
            #canvas {
                width: 100vw;
                height: 100vh;
                background-color: black;
            }
        </style>
    </head>
    <body>
        <div style="position: absolute;">
            <!-- Create a canvas for Web WorldWind. -->
            <canvas id="canvas">
                Your browser does not support HTML5 Canvas.
            </canvas>
        </div>
        <script>
            window.addEventListener("load", eventWindowLoaded, false);
            window.addEventListener("dblclick", focusISS);
            
            // Create a WorldWindow for the canvas.
            var wwd = new WorldWind.WorldWindow("canvas");
            var position;

            function eventWindowLoaded() {
                var starFieldLayer = new WorldWind.StarFieldLayer();
                var atmosphereLayer = new WorldWind.AtmosphereLayer();
                var now = new Date();
                starFieldLayer.time = now;
                atmosphereLayer.time = now;
                var layers = [
                    // Imagery layers.
                    {layer: new WorldWind.BMNGLayer(), enabled: true},
                    {layer: new WorldWind.BMNGLandsatLayer(), enabled: false},
                    {layer: new WorldWind.BingAerialLayer(null), enabled: false},
                    {layer: new WorldWind.BingAerialWithLabelsLayer(null), enabled: false},
                    {layer: new WorldWind.BingRoadsLayer(null), enabled: false},
                    {layer: starFieldLayer, enabled: true},
                    // Add atmosphere layer on top of all base layers.
                    {layer: atmosphereLayer, enabled: true},
                    // WorldWindow UI layers.
                    {layer: new WorldWind.CompassLayer(), enabled: true},
                    {layer: new WorldWind.CoordinatesDisplayLayer(wwd), enabled: true},
                    {layer: new WorldWind.ViewControlsLayer(wwd), enabled: true}
                ];

                for (let i = 0; i < layers.length; i++) {
                    layers[i].layer.enabled = layers[i].enabled;
                    wwd.addLayer(layers[i].layer);
                }

                // ISS 3D model
                var modelLayer = new WorldWind.RenderableLayer();
                wwd.addLayer(modelLayer);
                position = new WorldWind.Position(20.0, -75.0, 800000.0);
                var config = {dirPath: '/Nasa_Space_App/3D-model/'};
                var colladaLoader = new WorldWind.ColladaLoader(position, config);
				colladaLoader.load("textured.dae", function (colladaModel) {
				    colladaModel.scale = 140000;
				    modelLayer.addRenderable(colladaModel);
				});
            }

            function focusISS() {
                wwd.goTo(new WorldWind.Location(position.latitude, position.longitude));
            }
        </script>
    </body>
</html>
